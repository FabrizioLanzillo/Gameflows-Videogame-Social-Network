import json

file = open("users.json", "r", encoding="utf-8")

data = json.load(file)
new_data = []

for doc in data:
	new_doc = {}

	new_doc['username'] = doc['login']['username']
	new_doc['email'] = doc['email']

	# Password is generated by hashing (password | salt)
	# Hash algorithm is SHA-256
	new_doc['password'] = {}
	new_doc['password']['sha256'] = doc['login']['sha256']
	new_doc['password']['salt'] = doc['login']['salt']

	new_doc['name'] = doc['name']['first']
	new_doc['surname'] = doc['name']['last']
	new_doc['gender'] = doc['gender']
	new_doc['date-of-birth'] = doc['dob']['date'][0:10]
	new_doc['nationality'] = doc['nat']
	new_doc['picture'] = doc['picture']
	new_doc['isAdmin'] = False
	new_doc['isInfluencer'] = False

	new_data.append(new_doc)
## end for

file.close()

# Write results on file
file = open("db-users.json", "w", encoding="utf-8")
file.write(json.dumps(new_data, indent=2))
file.close()